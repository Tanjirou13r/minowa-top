<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>箕輪建設工業 | トップビューデモ</title>
    <!-- CSSファイルをリンク -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="t-top">
    <!-- ヘッダー -->
    <header class="l-header">
        <div class="l-header__body">
            <div class="l-header__frame">
                <div class="l-header__main">
                    <div class="l-header__logo">
                        <a href="/">
                            <img src="Minowa-logo-white_.webp" alt="松栄の家">
                        </a>
                    </div>
                    <nav class="l-menu">
                        <ul class="l-menu__list">
                            <li><a href="/">ホーム</a></li>
                            <li><a href="#business">事業内容</a></li>
                            <li><a href="#company">会社概要</a></li>
                            <li><a href="#careers">採用情報</a></li>
                        </ul>
                    </nav>
                    <div class="l-header__switch">
                        <div class="l-header__switch__content">
                            <div class="l-header__switch__icon">
                                <div class="l-header__switch__icon__obj"></div>
                            </div>
                            <div class="l-header__switch__icon__txt">MENU</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <div class="l-body">
        <!-- ファーストビュー -->
        <div class="l-title -top">
            <div class="l-title__visual c-content -fv" data-mt="true">
                <div class="c-content__inner">
                    <div class="l-title__visual__pict">
                        <div class="t-top__visual-slider">
                            <div class="js-carousel is-ready" data-fit="true" data-layer="true" data-skin="type2" data-cellanime="true">
                                <div class="js-carousel__main">
                                    <ul class="u-block">
                                        <li class="js-carousel__cell is-current" data-dir="zo" style="z-index: 279;">
                                            <div class="js-carousel__frame">
                                                <picture>
                                                    <source type="image/webp" srcset="1R3A5365-scaled-1.webp">
                                                    <img src="1R3A5365-scaled-1.webp" alt="松栄の家のイメージ" class="js-carousel__obj js-objectfit">
                                                </picture>
                                            </div>
                                        </li>
                                        <li class="js-carousel__cell" data-dir="zo" style="z-index: 280;">
                                            <div class="js-carousel__frame">
                                                <picture>
                                                    <source type="image/webp" srcset="1R3A3680-scaled-1.webp">
                                                    <img src="1R3A3680-scaled-1.webp" alt="松栄の家のイメージ" class="js-carousel__obj js-objectfit">
                                                </picture>
                                            </div>
                                        </li>
                                        <li class="js-carousel__cell" data-dir="zo" style="z-index: 281;">
                                            <div class="js-carousel__frame">
                                                <picture>
                                                    <source type="image/webp" srcset="1R3A5334-scaled-1.webp">
                                                    <img src="1R3A5334-scaled-1.webp" alt="松栄の家のイメージ" class="js-carousel__obj js-objectfit">
                                                </picture>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="t-top__visual-slogan">
                        <div class="t-top__visual-slogan__body">
                            <div class="t-top__visual-slogan__main">
                                <div class="t-top__visual-slogan__main__obj">
                                    <strong class="t-top__visual-slogan__main__area" id="slide-text">
                                        <!-- テキストはJavaScriptで動的に生成 -->
                                    </strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ページインジケーター -->
            <div class="t-top__visual-indicator">
                <svg class="t-top__visual-indicator__circle" width="80" height="80">
                    <circle class="t-top__visual-indicator__bg" cx="40" cy="40" r="35" />
                    <circle class="t-top__visual-indicator__progress" cx="40" cy="40" r="35" />
                </svg>
                <div class="t-top__visual-indicator__text">
                    <span id="current-slide">1</span> / <span id="total-slides">3</span>
                </div>
            </div>
        </div>
        
        <!-- スクロールアニメーション（スライドショーの外） -->
        <div class="t-top__visual-scroll">
            <div class="t-top__visual-scroll__main">
                <a class="t-top__visual-scroll__link js-hashMove" href="#top_main">
                    <div class="t-top__visual-scroll__txt">Scroll</div>
                    <div class="t-top__visual-scroll__line"></div>
                </a>
            </div>
        </div>
    </div>

    <script>
        // カルーセル機能とテキスト切り替えの実装
        document.addEventListener('DOMContentLoaded', function() {
            const slides = document.querySelectorAll('.js-carousel__cell');
            const textElement = document.getElementById('slide-text');
            const currentSlideElement = document.getElementById('current-slide');
            const totalSlidesElement = document.getElementById('total-slides');
            const progressCircle = document.querySelector('.t-top__visual-indicator__progress');
            let currentSlide = 0;
            const slideInterval = 4000; // 4秒
            const circumference = 2 * Math.PI * 35; // 円周の長さ

            // 総スライド数を設定
            totalSlidesElement.textContent = slides.length;

            // 各スライドに対応するテキストデータ
            const slideTexts = [
                {
                    lines: ['私たちは', '箕輪町の未来を', '創ります']
                },
                {
                    lines: ['あなたの個性で', '100年先の地球を', 'デザインする']
                },
                {
                    lines: ['未来を創る']
                }
            ];

            // テキストを一文字ずつアニメーション表示する関数
            function createAnimatedText(lines) {
                let html = '';
                let charIndex = 1;

                lines.forEach((line, lineIndex) => {
                    html += '<div class="t-top__visual-slogan__main__block">';
                    html += '<div class="t-top__visual-slogan__main__txt">';
                    html += '<span class="u-effect-type1">';
                    
                    for (let char of line) {
                        html += `<span class="u-effect__cell" style="animation-delay: ${charIndex * 0.1}s;">${char}</span>`;
                        charIndex++;
                    }
                    
                    html += '</span>';
                    html += '</div>';
                    html += '</div>';
                });

                return html;
            }

            // テキストを更新する関数
            function updateText(slideIndex) {
                textElement.innerHTML = createAnimatedText(slideTexts[slideIndex].lines);
            }

            // 初期化：最初のスライドとテキストを表示
            slides.forEach((slide, index) => {
                slide.classList.remove('is-current');
            });
            slides[0].classList.add('is-current');
            updateText(0);

            // 円形プログレスをリセットする関数
            function resetProgress() {
                progressCircle.style.transition = 'none';
                progressCircle.style.strokeDashoffset = circumference;
                setTimeout(() => {
                    progressCircle.style.transition = `stroke-dashoffset ${slideInterval}ms linear`;
                    progressCircle.style.strokeDashoffset = '0';
                }, 50);
            }

            // スライドを切り替える関数
            function nextSlide() {
                slides[currentSlide].classList.remove('is-current');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('is-current');
                
                // テキストも更新
                updateText(currentSlide);
                
                // ページ番号を更新
                currentSlideElement.textContent = currentSlide + 1;
                
                // プログレスをリセット
                resetProgress();
            }

            // 初回のプログレスアニメーション開始
            resetProgress();

            // 4秒ごとにスライドを自動切り替え
            setInterval(nextSlide, slideInterval);
        });
    </script>
</body>
</html> 